<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Plateforme p√©dagogique Iparralde 2040 - Mission Locale Pays Basque">
    <meta name="theme-color" content="#C62828">
    <title>Comp√©tence Territoire ‚Äì Iparralde 2040 x LS4YOU</title>
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiSXBhcnJhbGRlIDIwNDAiLCJzaG9ydF9uYW1lIjoiSXBhcnJhbGRlIiwic3RhcnRfdXJsIjoiLyIsImRpc3BsYXkiOiJzdGFuZGFsb25lIiwiYmFja2dyb3VuZF9jb2xvciI6IiNGRkZGRkYiLCJ0aGVtZV9jb2xvciI6IiNDNjI4MjgiLCJpY29ucyI6W3sic3JjIjoiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQSE4yWnlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhkcFpIUm9QU0l4T1RJaUlHaGxhV2RvZEQwaU1Ua3lJajQ4Y21WamRDQjNhV1IwYUQwaU1Ua3lJaUJvWldsbmFIUTlJakU1TWlJZ1ptbHNiRDBpSTBNMk1qZ3lPQ0l2UGp3dmMzWm5QZz09Iiwic2l6ZXMiOiIxOTJ4MTkyIiwidHlwZSI6ImltYWdlL3N2Zyt4bWwifV19">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;700;900&family=Nunito:wght@300;400;600;800;900&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --rouge-cerise: #C62828;
            --jaune-vif: #FFD54F;
            --turquoise: #4DD0E1;
            --menthe: #B2DFDB;
            --orange: #FFB74D;
            --blanc: #FFFFFF;
            --noir: #212121;
            --gris-leger: #F5F5F5;
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, sans-serif;
            font-size: 16px;
            font-weight: 400;
            line-height: 1.7;
            color: var(--noir);
            background: var(--blanc);
            min-height: 100vh;
            overflow-x: hidden;
        }

        h1, h2, h3 {
            font-family: 'Nunito', sans-serif;
            font-weight: 900;
            line-height: 1.2;
        }

        h1 {
            font-size: clamp(36px, 6vw, 64px);
            color: var(--rouge-cerise);
            letter-spacing: -0.02em;
        }

        h2 {
            font-size: clamp(28px, 5vw, 48px);
            color: var(--rouge-cerise);
        }

        h3 {
            font-size: clamp(20px, 4vw, 32px);
            color: var(--noir);
            font-weight: 800;
        }

        p {
            font-weight: 300;
            font-size: clamp(15px, 2vw, 18px);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .header {
            background: var(--blanc);
            padding: 24px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(198, 40, 40, 0.08);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .logo {
            font-family: 'Nunito', sans-serif;
            font-weight: 900;
            font-size: clamp(24px, 4vw, 36px);
            color: var(--rouge-cerise);
            letter-spacing: -0.01em;
        }

        .logo span {
            color: var(--turquoise);
        }

        .nav-breadcrumb {
            display: flex;
            gap: 12px;
            align-items: center;
            flex-wrap: wrap;
            font-weight: 500;
            color: var(--noir);
        }

        .btn {
            font-family: 'Nunito', sans-serif;
            font-weight: 700;
            padding: 16px 40px;
            border-radius: 50px;
            border: none;
            cursor: pointer;
            transition: var(--transition);
            font-size: 18px;
            display: inline-block;
            text-decoration: none;
            text-align: center;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--rouge-cerise), #D32F2F);
            color: var(--blanc);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 32px rgba(198, 40, 40, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--turquoise), #26C6DA);
            color: var(--blanc);
        }

        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 32px rgba(77, 208, 225, 0.3);
        }

        .btn-outline {
            background: var(--blanc);
            color: var(--rouge-cerise);
            border: 3px solid var(--rouge-cerise);
            box-shadow: none;
        }

        .btn-outline:hover {
            background: var(--rouge-cerise);
            color: var(--blanc);
        }

        .card {
            background: var(--blanc);
            border-radius: 32px;
            padding: 40px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.06);
            transition: var(--transition);
            margin-bottom: 30px;
            position: relative;
            overflow: visible;
        }

        .card::before {
            content: '';
            position: absolute;
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: var(--turquoise);
            opacity: 0.1;
            top: -30px;
            right: -30px;
            z-index: 0;
        }

        .card > * {
            position: relative;
            z-index: 1;
        }

        .card:hover {
            transform: translateY(-6px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
        }

        .pillar-card {
            cursor: pointer;
            border-radius: 32px;
            position: relative;
            overflow: hidden;
            border: 4px solid transparent;
        }

        .pillar-card::after {
            content: '';
            position: absolute;
            width: 200px;
            height: 200px;
            border-radius: 50%;
            top: -50px;
            right: -50px;
            opacity: 0.15;
            transition: var(--transition);
        }

        .pillar-card.accueillir {
            border-color: var(--rouge-cerise);
        }

        .pillar-card.accueillir::after {
            background: var(--rouge-cerise);
        }

        .pillar-card.creer {
            border-color: var(--jaune-vif);
        }

        .pillar-card.creer::after {
            background: var(--jaune-vif);
        }

        .pillar-card.habiter {
            border-color: var(--turquoise);
        }

        .pillar-card.habiter::after {
            background: var(--turquoise);
        }

        .pillar-card.soin {
            border-color: var(--orange);
        }

        .pillar-card.soin::after {
            background: var(--orange);
        }

        .pillar-card:hover::after {
            opacity: 0.25;
            transform: scale(1.2);
        }

        .badge {
            display: inline-block;
            padding: 12px 28px;
            border-radius: 50px;
            background: linear-gradient(135deg, var(--jaune-vif), var(--orange));
            color: var(--noir);
            font-weight: 700;
            font-size: 16px;
            margin: 8px;
            box-shadow: 0 6px 20px rgba(255, 213, 79, 0.4);
            font-family: 'Nunito', sans-serif;
        }

        .badge-earned {
            padding: 32px;
            border-radius: 32px;
            background: linear-gradient(135deg, var(--rouge-cerise), var(--orange));
            color: var(--blanc);
            text-align: center;
            min-width: 220px;
            box-shadow: 0 12px 40px rgba(198, 40, 40, 0.3);
        }

        .badge-icon {
            font-size: 64px;
            margin-bottom: 16px;
        }

        .progress-bar {
            width: 100%;
            height: 16px;
            background: var(--gris-leger);
            border-radius: 50px;
            overflow: hidden;
            margin: 20px 0;
            box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--turquoise), var(--menthe));
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 50px;
            box-shadow: 0 2px 12px rgba(77, 208, 225, 0.5);
        }

        .grid {
            display: grid;
            gap: 30px;
            margin: 30px 0;
        }

        .grid-2 {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .grid-3 {
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        }

        .choice-card {
            padding: 24px;
            border: 3px solid var(--gris-leger);
            border-radius: 24px;
            cursor: pointer;
            transition: var(--transition);
            background: var(--blanc);
            position: relative;
        }

        .choice-card::before {
            content: '';
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--turquoise);
            opacity: 0;
            top: -15px;
            right: -15px;
            transition: var(--transition);
        }

        .choice-card:hover {
            border-color: var(--turquoise);
            transform: scale(1.03);
        }

        .choice-card:hover::before {
            opacity: 0.15;
        }

        .choice-card.selected {
            border-color: var(--rouge-cerise);
            background: linear-gradient(135deg, rgba(198, 40, 40, 0.05), rgba(255, 183, 77, 0.05));
            box-shadow: 0 8px 24px rgba(198, 40, 40, 0.2);
        }

        .choice-card.selected::before {
            background: var(--rouge-cerise);
            opacity: 0.2;
        }

        input[type="text"],
        input[type="number"],
        textarea,
        select {
            width: 100%;
            padding: 16px 24px;
            border: 3px solid var(--gris-leger);
            border-radius: 20px;
            font-family: 'Montserrat', sans-serif;
            font-size: 16px;
            transition: var(--transition);
            background: var(--blanc);
        }

        input:focus,
        textarea:focus,
        select:focus {
            outline: none;
            border-color: var(--turquoise);
            box-shadow: 0 0 0 4px rgba(77, 208, 225, 0.15);
        }

        textarea {
            min-height: 140px;
            resize: vertical;
        }

        .score-display {
            background: linear-gradient(135deg, var(--turquoise), var(--menthe));
            color: var(--blanc);
            padding: 48px;
            border-radius: 32px;
            text-align: center;
            margin: 30px 0;
            box-shadow: 0 16px 48px rgba(77, 208, 225, 0.3);
        }

        .score-number {
            font-size: clamp(56px, 8vw, 80px);
            font-weight: 900;
            font-family: 'Nunito', sans-serif;
            text-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }

        .verb-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
            gap: 16px;
            margin: 30px 0;
        }

        .verb-card {
            padding: 24px;
            text-align: center;
            border: 3px solid var(--gris-leger);
            border-radius: 24px;
            cursor: pointer;
            transition: var(--transition);
            background: var(--blanc);
        }

        .verb-card:hover {
            transform: scale(1.08) rotate(2deg);
            border-color: var(--jaune-vif);
        }

        .verb-card.selected {
            border-color: var(--rouge-cerise);
            background: linear-gradient(135deg, var(--jaune-vif), var(--orange));
            color: var(--blanc);
            box-shadow: 0 8px 24px rgba(255, 213, 79, 0.4);
        }

        .verb-icon {
            font-size: 40px;
            margin-bottom: 12px;
        }

        .slider-container {
            margin: 30px 0;
        }

        input[type="range"] {
            width: 100%;
            height: 12px;
            border-radius: 12px;
            background: var(--gris-leger);
            outline: none;
            -webkit-appearance: none;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--rouge-cerise), var(--orange));
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(198, 40, 40, 0.3);
        }

        input[type="range"]::-moz-range-thumb {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--rouge-cerise), var(--orange));
            cursor: pointer;
            border: none;
            box-shadow: 0 4px 12px rgba(198, 40, 40, 0.3);
        }

        .canvas-container {
            background: var(--gris-leger);
            border-radius: 24px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: inset 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        #mindmapCanvas {
            border: 3px dashed var(--turquoise);
            border-radius: 16px;
            cursor: crosshair;
            background: var(--blanc);
        }

        .simulator-result {
            padding: 32px;
            border-radius: 24px;
            margin: 30px 0;
            border-left: 8px solid;
        }

        .simulator-result.vert {
            background: linear-gradient(135deg, rgba(77, 208, 225, 0.1), rgba(178, 223, 219, 0.1));
            border-left-color: var(--turquoise);
        }

        .simulator-result.orange {
            background: linear-gradient(135deg, rgba(255, 183, 77, 0.1), rgba(255, 213, 79, 0.1));
            border-left-color: var(--orange);
        }

        .simulator-result.rouge {
            background: linear-gradient(135deg, rgba(198, 40, 40, 0.1), rgba(211, 47, 47, 0.1));
            border-left-color: var(--rouge-cerise);
        }

        .drag-drop-area {
            min-height: 200px;
            border: 3px dashed var(--turquoise);
            border-radius: 24px;
            padding: 24px;
            margin: 20px 0;
            background: var(--gris-leger);
        }

        .draggable {
            padding: 16px 24px;
            background: var(--blanc);
            border: 3px solid var(--turquoise);
            border-radius: 20px;
            margin: 12px 0;
            cursor: move;
            user-select: none;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .draggable:hover {
            border-color: var(--rouge-cerise);
            transform: scale(1.02);
        }

        .tree-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            margin: 40px 0;
        }

        .tree-section {
            width: 100%;
            max-width: 600px;
        }

        .badges-collection {
            display: flex;
            flex-wrap: wrap;
            gap: 24px;
            justify-content: center;
            margin: 40px 0;
        }

        .passport-section {
            background: var(--blanc);
            padding: 60px 40px;
            border-radius: 32px;
            margin: 30px 0;
            box-shadow: 0 16px 48px rgba(0, 0, 0, 0.08);
            position: relative;
        }

        .passport-section::before {
            content: '';
            position: absolute;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: var(--turquoise);
            opacity: 0.05;
            top: -100px;
            right: -100px;
        }

        .passport-section::after {
            content: '';
            position: absolute;
            width: 250px;
            height: 250px;
            border-radius: 50%;
            background: var(--jaune-vif);
            opacity: 0.05;
            bottom: -80px;
            left: -80px;
        }

        .feedback-display {
            background: linear-gradient(135deg, rgba(77, 208, 225, 0.1), rgba(178, 223, 219, 0.1));
            border-left: 6px solid var(--turquoise);
            padding: 24px;
            border-radius: 20px;
            margin: 16px 0;
        }

        .notification {
            position: fixed;
            top: 100px;
            right: 30px;
            padding: 20px 32px;
            background: var(--blanc);
            border-radius: 50px;
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            animation: slideIn 0.4s ease;
            font-weight: 600;
            border-left: 6px solid var(--rouge-cerise);
        }

        @keyframes slideIn {
            from { transform: translateX(500px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .loading {
            text-align: center;
            padding: 60px;
        }

        .spinner {
            width: 60px;
            height: 60px;
            border: 6px solid var(--gris-leger);
            border-top-color: var(--rouge-cerise);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .hidden {
            display: none !important;
        }

        .fade-in {
            animation: fadeIn 0.6s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .floating-circle {
            position: fixed;
            border-radius: 50%;
            opacity: 0.08;
            pointer-events: none;
            z-index: -1;
        }

        .circle-1 {
            width: 400px;
            height: 400px;
            background: var(--turquoise);
            top: 10%;
            right: -100px;
        }

        .circle-2 {
            width: 300px;
            height: 300px;
            background: var(--jaune-vif);
            bottom: 15%;
            left: -80px;
        }

        .circle-3 {
            width: 200px;
            height: 200px;
            background: var(--orange);
            top: 50%;
            right: 10%;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px 16px;
            }

            .card {
                padding: 24px;
                border-radius: 24px;
            }

            .btn {
                padding: 14px 32px;
                width: 100%;
                margin: 8px 0;
            }

            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }

            .verb-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }

            .score-display {
                padding: 32px 24px;
            }

            .passport-section {
                padding: 40px 24px;
            }

            h1 {
                font-size: 36px;
            }

            h2 {
                font-size: 28px;
            }
        }

        @media print {
            .header, .btn, .notification {
                display: none;
            }

            .passport-section {
                box-shadow: none;
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="floating-circle circle-1"></div>
    <div class="floating-circle circle-2"></div>
    <div class="floating-circle circle-3"></div>

    <header class="header">
        <div class="header-content">
            <div class="logo">Iparralde <span>2040</span></div>
            <div class="nav-breadcrumb">
                <span id="breadcrumb">Accueil</span>
            </div>
            <button class="btn btn-outline" onclick="showProgress()">üìä Ma Progression</button>
        </div>
    </header>

    <div class="container">
        <div id="app-content"></div>
    </div>

    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('data:text/javascript;base64,c2VsZi5hZGRFdmVudExpc3RlbmVyKCdpbnN0YWxsJywgKCkgPT4gc2VsZi5za2lwV2FpdGluZygpKTsKc2VsZi5hZGRFdmVudExpc3RlbmVyKCdmZXRjaCcsIGV2ZW50ID0+IHsKICBldmVudC5yZXNwb25kV2l0aCgKICAgIGNhY2hlcy5tYXRjaChldmVudC5yZXF1ZXN0KS50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlIHx8IGZldGNoKGV2ZW50LnJlcXVlc3QpKQogICk7Cn0pOw==');
        }

        const AppState = {
            currentView: 'accueil',
            userData: {},
            badges: [],
            progress: {
                accueillir: 0,
                creer: 0,
                habiter: 0,
                soin: 0
            },
            load() {
                const saved = localStorage.getItem('iparralde2040');
                if (saved) {
                    const data = JSON.parse(saved);
                    this.userData = data.userData || {};
                    this.badges = data.badges || [];
                    this.progress = data.progress || this.progress;
                }
            },
            save() {
                localStorage.setItem('iparralde2040', JSON.stringify({
                    userData: this.userData,
                    badges: this.badges,
                    progress: this.progress
                }));
            },
            addBadge(name) {
                if (!this.badges.includes(name)) {
                    this.badges.push(name);
                    this.save();
                    showNotification(`üéâ Badge "${name}" d√©bloqu√© !`);
                }
            },
            updateProgress(pillar, percent) {
                this.progress[pillar] = Math.max(this.progress[pillar], percent);
                this.save();
            }
        };

        function navigate(view) {
            window.location.hash = view;
        }

        function handleRoute() {
            const hash = window.location.hash.slice(1) || 'accueil';
            AppState.currentView = hash;
            updateBreadcrumb(hash);
            renderView(hash);
        }

        function updateBreadcrumb(view) {
            const breadcrumb = document.getElementById('breadcrumb');
            const labels = {
                'accueil': 'Accueil',
                'accueillir': 'Accueillir',
                'accueillir-a': 'Accueillir ‚Üí Image de soi',
                'accueillir-b': 'Accueillir ‚Üí Feedback',
                'creer': 'Cr√©er',
                'creer-a': 'Cr√©er ‚Üí Mon meilleur',
                'creer-b': 'Cr√©er ‚Üí Switch posture',
                'habiter': 'Habiter',
                'habiter-a': 'Habiter ‚Üí Mindmap',
                'habiter-b': 'Habiter ‚Üí Simulateur',
                'soin': 'Prendre soin',
                'soin-a': 'Soin ‚Üí Arbre r√©silience',
                'soin-b': 'Soin ‚Üí R√©seau soutien',
                'synthese': 'Mon Passeport'
            };
            breadcrumb.textContent = labels[view] || 'Navigation';
        }

        function renderView(view) {
            const content = document.getElementById('app-content');
            content.className = 'fade-in';

            switch(view) {
                case 'accueil':
                    renderAccueil();
                    break;
                case 'accueillir':
                    renderPillarIntro('accueillir');
                    break;
                case 'accueillir-a':
                    renderAccueillirA();
                    break;
                case 'accueillir-b':
                    renderAccueillirB();
                    break;
                case 'creer':
                    renderPillarIntro('creer');
                    break;
                case 'creer-a':
                    renderCreerA();
                    break;
                case 'creer-b':
                    renderCreerB();
                    break;
                case 'habiter':
                    renderPillarIntro('habiter');
                    break;
                case 'habiter-a':
                    renderHabiterA();
                    break;
                case 'habiter-b':
                    renderHabiterB();
                    break;
                case 'soin':
                    renderPillarIntro('soin');
                    break;
                case 'soin-a':
                    renderSoinA();
                    break;
                case 'soin-b':
                    renderSoinB();
                    break;
                case 'synthese':
                    renderSynthese();
                    break;
                default:
                    renderAccueil();
            }
        }

        function renderAccueil() {
            const content = document.getElementById('app-content');
            content.innerHTML = `
                <div style="text-align: center; margin: 60px 0;">
                    <h1>üåç Bienvenue dans Iparralde 2040</h1>
                    <p style="font-size: 20px; color: #757575; max-width: 700px; margin: 30px auto; font-weight: 300;">
                        Explore ton territoire, d√©veloppe tes comp√©tences et construis ton avenir au Pays Basque.
                    </p>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${calculateGlobalProgress()}%"></div>
                </div>
                <p style="text-align: center; margin-bottom: 50px; font-size: 18px; font-weight: 600;">Progression globale : ${calculateGlobalProgress()}%</p>

                <div class="grid grid-2">
                    <div class="card pillar-card accueillir" onclick="navigate('accueillir')">
                        <h2>ü§ù ACCUEILLIR</h2>
                        <p style="margin: 20px 0;">D√©couvre ton style relationnel et apprends √† recevoir les feedbacks.</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${AppState.progress.accueillir}%"></div>
                        </div>
                        <p style="margin-top: 12px; font-size: 15px; font-weight: 600; color: #757575;">
                            ${AppState.progress.accueillir}% compl√©t√©
                        </p>
                    </div>

                    <div class="card pillar-card creer" onclick="navigate('creer')">
                        <h2>‚ú® CR√âER</h2>
                        <p style="margin: 20px 0;">Identifie tes forces et transforme ta posture professionnelle.</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${AppState.progress.creer}%"></div>
                        </div>
                        <p style="margin-top: 12px; font-size: 15px; font-weight: 600; color: #757575;">
                            ${AppState.progress.creer}% compl√©t√©
                        </p>
                    </div>

                    <div class="card pillar-card habiter" onclick="navigate('habiter')">
                        <h2>üè° HABITER</h2>
                        <p style="margin: 20px 0;">Cartographie tes ressources et simule ton budget de vie.</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${AppState.progress.habiter}%"></div>
                        </div>
                        <p style="margin-top: 12px; font-size: 15px; font-weight: 600; color: #757575;">
                            ${AppState.progress.habiter}% compl√©t√©
                        </p>
                    </div>

                    <div class="card pillar-card soin" onclick="navigate('soin')">
                        <h2>üíö PRENDRE SOIN</h2>
                        <p style="margin: 20px 0;">Construis ton arbre de r√©silience et ton r√©seau de soutien.</p>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${AppState.progress.soin}%"></div>
                        </div>
                        <p style="margin-top: 12px; font-size: 15px; font-weight: 600; color: #757575;">
                            ${AppState.progress.soin}% compl√©t√©
                        </p>
                    </div>
                </div>

                ${AppState.badges.length > 0 ? `
                    <div class="card" style="margin-top: 50px; text-align: center;">
                        <h3>üèÜ Mes Badges</h3>
                        <div style="display: flex; flex-wrap: wrap; gap: 16px; justify-content: center; margin-top: 24px;">
                            ${AppState.badges.map(b => `<span class="badge">${b}</span>`).join('')}
                        </div>
                    </div>
                ` : ''}

                <div style="text-align: center; margin-top: 60px;">
                    <button class="btn btn-primary" onclick="navigate('synthese')">
                        üìã Voir Mon Passeport Comp√©tences
                    </button>
                </div>
            `;
        }

        function renderPillarIntro(pillar) {
            const content = document.getElementById('app-content');
            const data = {
                accueillir: {
                    title: 'ü§ù ACCUEILLIR',
                    desc: 'Comment je me pr√©sente et comment je re√ßois les retours des autres ?',
                    activities: [
                        { id: 'a', title: 'Image de soi/publique', desc: 'Explore ton style relationnel en groupe et en situation professionnelle' },
                        { id: 'b', title: 'Le feedback comme don', desc: 'Apprends √† recevoir et utiliser les retours constructifs' }
                    ]
                },
                creer: {
                    title: '‚ú® CR√âER',
                    desc: 'Quelles sont mes forces et comment je les valorise ?',
                    activities: [
                        { id: 'a', title: 'Moi √† mon meilleur', desc: 'Identifie tes comp√©tences √† travers tes r√©ussites' },
                        { id: 'b', title: 'Switch posture', desc: 'Passe de demandeur √† offreur sur le march√© du travail' }
                    ]
                },
                habiter: {
                    title: 'üè° HABITER',
                    desc: 'De quoi j\'ai besoin pour vivre ici et maintenant ?',
                    activities: [
                        { id: 'a', title: 'Fais le point', desc: 'Cartographie tes ressources, obstacles et alli√©s' },
                        { id: 'b', title: 'Simulateur Vraie Vie', desc: 'Teste ton budget et ta strat√©gie financi√®re' }
                    ]
                },
                soin: {
                    title: 'üíö PRENDRE SOIN',
                    desc: 'Comment je cultive mon bien-√™tre et ma r√©silience ?',
                    activities: [
                        { id: 'a', title: 'Arbre de r√©silience', desc: 'Construis tes fondations, ton tronc et tes branches' },
                        { id: 'b', title: 'R√©seau + Stressom√®tre', desc: 'Identifie tes soutiens et mesure ton stress' }
                    ]
                }
            };

            const info = data[pillar];
            content.innerHTML = `
                <div class="card" style="text-align: center;">
                    <h1>${info.title}</h1>
                    <p style="font-size: 20px; margin: 30px 0; font-weight: 300;">${info.desc}</p>
                </div>

                <div class="grid grid-2">
                    ${info.activities.map(act => `
                        <div class="card" style="cursor: pointer;" onclick="navigate('${pillar}-${act.id}')">
                            <h3>Activit√© ${act.id.toUpperCase()} : ${act.title}</h3>
                            <p style="margin: 20px 0;">${act.desc}</p>
                            <button class="btn btn-primary" style="margin-top: 20px;">
                                Commencer ‚Üí
                            </button>
                        </div>
                    `).join('')}
                </div>

                <div style="text-align: center; margin-top: 40px;">
                    <button class="btn btn-outline" onclick="navigate('accueil')">
                        ‚Üê Retour √† l'accueil
                    </button>
                </div>
            `;
        }

        function renderAccueillirA() {
            showNotification('üìù Module Accueillir A - En d√©veloppement');
            navigate('accueil');
        }

        function renderAccueillirB() {
            showNotification('üìù Module Accueillir B - En d√©veloppement');
            navigate('accueil');
        }

        function renderCreerA() {
            showNotification('üìù Module Cr√©er A - En d√©veloppement');
            navigate('accueil');
        }

        function renderCreerB() {
            showNotification('üìù Module Cr√©er B - En d√©veloppement');
            navigate('accueil');
        }

        function renderHabiterA() {
            showNotification('üìù Module Habiter A - En d√©veloppement');
            navigate('accueil');
        }

        function renderHabiterB() {
            showNotification('üìù Module Habiter B - En d√©veloppement');
            navigate('accueil');
        }

        function renderSoinA() {
            showNotification('üìù Module Soin A - En d√©veloppement');
            navigate('accueil');
        }

        function renderSoinB() {
            showNotification('üìù Module Soin B - En d√©veloppement');
            navigate('accueil');
        }

        function renderSynthese() {
            const content = document.getElementById('app-content');
            const totalProgress = calculateGlobalProgress();

            content.innerHTML = `
                <div class="passport-section">
                    <div style="text-align: center;">
                        <h1 style="margin-bottom: 16px;">üìã Mon Passeport Comp√©tences</h1>
                        <p style="font-size: 20px; color: #757575; font-weight: 300;">Iparralde 2040 - Mission Locale Pays Basque</p>
                        <div class="progress-bar" style="margin: 30px auto; max-width: 500px;">
                            <div class="progress-fill" style="width: ${totalProgress}%"></div>
                        </div>
                        <p style="font-weight: 700; font-size: 20px; color: var(--rouge-cerise);">Parcours compl√©t√© √† ${totalProgress}%</p>
                    </div>

                    <div class="badges-collection" style="margin: 60px 0;">
                        <h2 style="width: 100%; text-align: center; margin-bottom: 30px;">üèÜ Mes Badges</h2>
                        ${AppState.badges.length > 0 ? 
                            AppState.badges.map(badge => `
                                <div class="badge-earned">
                                    <div class="badge-icon">${badge.includes('RELIEUR') ? 'ü§ù' : badge.includes('CR√âATEUR') ? '‚ú®' : badge.includes('ANCR√â') ? 'üè°' : 'üíö'}</div>
                                    <h3 style="margin-top: 12px;">${badge}</h3>
                                </div>
                            `).join('') :
                            '<p style="color: #757575; text-align: center; width: 100%; font-size: 18px;">Compl√®te les modules pour d√©bloquer des badges</p>'
                        }
                    </div>

                    <div class="card" style="margin-top: 60px; text-align: center; background: linear-gradient(135deg, var(--turquoise), var(--menthe)); color: white;">
                        <h3 style="color: white;">üìÖ Date de cr√©ation</h3>
                        <p style="margin-top: 12px; font-size: 20px; font-weight: 700;">${new Date().toLocaleDateString('fr-FR')}</p>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 50px;">
                    <button class="btn btn-outline" onclick="navigate('accueil')">
                        ‚Üê Retour √† l'accueil
                    </button>
                </div>
            `;
        }

        function calculateGlobalProgress() {
            const p = AppState.progress;
            return Math.round((p.accueillir + p.creer + p.habiter + p.soin) / 4);
        }

        function showProgress() {
            const modal = `
                <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 9999; display: flex; align-items: center; justify-content: center;" onclick="this.remove()">
                    <div class="card" style="max-width: 600px; margin: 20px;" onclick="event.stopPropagation()">
                        <h2>üìä Ma Progression</h2>
                        <div style="margin: 30px 0;">
                            <p style="font-weight: 600; margin-bottom: 8px;">ACCUEILLIR: ${AppState.progress.accueillir}%</p>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${AppState.progress.accueillir}%"></div>
                            </div>

                            <p style="font-weight: 600; margin: 20px 0 8px;">CR√âER: ${AppState.progress.creer}%</p>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${AppState.progress.creer}%"></div>
                            </div>

                            <p style="font-weight: 600; margin: 20px 0 8px;">HABITER: ${AppState.progress.habiter}%</p>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${AppState.progress.habiter}%"></div>
                            </div>

                            <p style="font-weight: 600; margin: 20px 0 8px;">PRENDRE SOIN: ${AppState.progress.soin}%</p>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: ${AppState.progress.soin}%"></div>
                            </div>
                        </div>

                        <p style="text-align: center; font-weight: 900; font-size: 24px; color: var(--rouge-cerise); font-family: 'Nunito', sans-serif;">
                            Global: ${calculateGlobalProgress()}%
                        </p>

                        <button class="btn btn-primary" style="width: 100%; margin-top: 30px;" onclick="this.parentElement.parentElement.remove()">
                            Fermer
                        </button>
                    </div>
                </div>
            `;

            document.body.insertAdjacentHTML('beforeend', modal);
        }

        function showNotification(message) {
            const notif = document.createElement('div');
            notif.className = 'notification';
            notif.textContent = message;
            document.body.appendChild(notif);

            setTimeout(() => notif.remove(), 3500);
        }

        window.addEventListener('hashchange', handleRoute);
        window.addEventListener('load', () => {
            AppState.load();
            handleRoute();
        });
    </script>
</body>
</html>
